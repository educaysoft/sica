!function(){var e={38268:function(e,t,n){"use strict";n.d(t,{hM:function(){return i}}),$("#new-player .slide"),$("#slide-container"),$("#new-player .slide-image").first(),$("#new-player .slide.current .slide-image"),$("#new-player #current-slide"),$("#new-player #stage"),$("#progress-bar ");const i=$("#new-player");$("#player-toolbar")},68153:function(e,t,n){"use strict";n.d(t,{pY:function(){return r},t4:function(){return s},PQ:function(){return a},fB:function(){return d},hT:function(){return l},bY:function(){return f},xT:function(){return h},aU:function(){return _},Hp:function(){return p}});var i=n(86544);n(38268);const o="contentAccountGateData",r=()=>5,s=()=>2,a=(e,t,n)=>({shouldShowBanner:e-t<=n,remainingDocCount:e-t}),d=(e,t)=>e<=t,c=e=>Array.isArray(e)?e.filter((e=>{return!(!(i=e.id)||"string"!=typeof i||(t=e.accessedDateTime,!t||!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(n=t)||new Date(n).toISOString()!==n));var t,n,i})):[],u=e=>JSON.parse(window.localStorage.getItem(`${o}_${e}`)),l=(e,t)=>{window.localStorage.setItem(`${o}_${t}`,JSON.stringify(e))},w=e=>{const t=window.slideshare_object.slideshow,n={slideshow_id:t.id,slideshow_created_at:t.created_at,slideshow_category:window.slideshare_object.gam_cat_name,slideshow_language:t.language,slideshow_format:t.type};"undefined"!=typeof amplitude&&amplitude.getInstance().logEvent(e,n)},f=e=>{["control","show_view_restirction"].map((t=>{t!==e&&c(u(t)).length>0&&window.localStorage.removeItem(`${o}_${t}`)}))},h=()=>{try{return window.localStorage.setItem("slideshare_test","test"),window.localStorage.removeItem("slideshare_test"),!0}catch(e){return!1}},_=({slideshowId:e,allowedContentCount:t,viewRestrictionAbTestValue:n})=>{const i=c(u(n));if(i.length>0){const n=((e,t)=>{const n=(e=>{const t=Date.now();return new Date(t-864e5*e).toISOString()})(t);return e.filter((e=>e.accessedDateTime>n))})(i,30),o=((e,t)=>e.findIndex((e=>e.id===t))>-1)(n,e);return!o&&n.length<t?((e,t)=>(e.push({id:t,accessedDateTime:(new Date).toISOString()}),(e=>{const t=r(),n=e===t;e===t-s()?w("view_restriction_banner_shown"):n&&w("view_restriction_threshold_hit")})(e.length),e))(n,e):n}return[{id:e,accessedDateTime:(new Date).toISOString()}]},m=()=>{const e=window.slideshare_object,t=e&&e.slideshow;(0,i.Z)({from_source:t.ss_url,slideshow_id:t.id})},p=(e,t,n)=>{if(e){const e=$(".limit-notification"),i=e.find("#notification-warning-text");return i.empty(),i.append(((e,t)=>{const n=t.utils;return e<=0?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text"):1===e?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_last_document_text"):n.i18n("slideshow.foundation_slideview.limit_content_without_accoun.notification_banner_text",{count:e})})(t,n)),e.find("#notification-warning-link").on("click",m),void e.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})}}},86544:function(e,t){"use strict";let n;t.Z=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload},i=new FormData;for(let[e,n]of Object.entries(t))n&&i.append(e,n);(n=n||new Promise(((e,t)=>{const n=document.querySelector('meta[name="csrf-token"]');if(n)return e(n.getAttribute("content"));fetch("/csrf_token",{credentials:"same-origin",method:"GET"}).then((e=>{if(e.ok)return e.json();t(`http error: ${e.status}`)})).then((t=>e(t.csrf_token)))})),n).then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:i}).then((e=>e.json())).then((e=>{const t=document.createElement("form");t.setAttribute("action",e.url),t.setAttribute("method","POST");for(let[n,i]of Object.entries(e.params)){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",n),e.value=i,t.appendChild(e)}document.body.appendChild(t),t.submit()}))))}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"cbe0b66ee2acc93337d9365f0dc76f4dd29ca056"},function(){"use strict";var e=n(68153);n(38268),window.addEventListener("DOMContentLoaded",(()=>{const t=window.slideshare_object,n=t&&t.slideshow,i=n.type,o=n.total_slides,r=t.utils.isUserAuthenticated(),s="control",a=window.feature_flags.viewRestrictionsWithoutAccount,d=(0,e.xT)();if(a&&d&&!r&&("presentation"===i||"document"===i)&&o>1){const t=(0,e.pY)(),i=(0,e.aU)({slideshowId:n.id,allowedContentCount:t,viewRestrictionAbTestValue:s});(0,e.hT)(i,s),i.length,(0,e.bY)(s)}}))}()}();
//# sourceMappingURL=content-account-gate.6aa8739bb2edfd59488e.js.map